Terminal = (
  "To interact directly with a console we need some primitives
   and some C magic.

   @include <termios.h>
   @include <unistd.h>
   
  "
  ----
  KEY_UP = (^#key_up)
  KEY_DOWN = (^#key_down)
  KEY_LEFT = (^#key_left)
  KEY_RIGHT = (^#key_right)
	
  init = primitive "@
    struct termios tty, old_tty;
    tcgetattr(0, &old_tty);
    tty = old_tty;
    tty.c_lflag = tty.c_lflag & ~(ECHO | ECHOK | ICANON);
    tty.c_cc[VTIME] = 1;
    tcsetattr(0, TCSANOW, &tty);
  @"

  uninit = primitive "@
  @"
  
  cursorToX: x Y: y = (
    '[' print.
    y print.
    ';' print.
    x print.
    'H' print.
  )

  clear = (
    '[2J' print.
  )

  put: str = (
    str print
  )

  get = primitive "@ @"	
)
